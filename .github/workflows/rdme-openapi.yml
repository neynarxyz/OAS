name: ReadMe GitHub Action ðŸ¦‰

on:
  push:
    branches:
      - main

jobs:
  rdme-openapi:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repo ðŸ“š
        uses: actions/checkout@v3

      # Install rdme globally
      - name: Install rdme
        run: npm install -g rdme@8.6.4

      # Setting the working directory for all steps to './src'
      - name: Run `openapi` command for v1 spec ðŸš€
        env:
          README_API_KEY: ${{ secrets.README_API_KEY }}
        working-directory: ./src
        run: rdme openapi v1/spec.yaml --key=$README_API_KEY --id=65313d8d196216005b2ed13e

      - name: Run `openapi` command for v2 spec ðŸš€
        env:
          README_API_KEY: ${{ secrets.README_API_KEY }}
        working-directory: ./src
        run: rdme openapi v2/spec.yaml --key=$README_API_KEY --id=653140896cad5a001321c86f

      - name: Run `openapi` command for v2 recommendation spec ðŸš€
        env:
          README_API_KEY: ${{ secrets.README_API_KEY }}
        working-directory: ./src
        run: rdme openapi v2/recommendation/spec.yaml --key=$README_API_KEY --id=6537721ac0ccd40031482643